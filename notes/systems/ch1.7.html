<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Programming</title>
  <link rel="stylesheet" href="../../css/systems/style.css"/>
</head>

<body>
  <main>
    <header>
      <h1><a href="intro.html"> <</a> Chapter 1 : Overview</h1>
    </header>

    
    <section>
      <h2>1.7. Additional System-Programming Facilities</h2>

      <h3>1.7.1 Hardware Multitasking</h3>
      <p>A task is any program that the processor can execute, suspend, and later resume
      executing at the point of suspension. During the time a task is suspended, other tasks
      are allowed to execute. Each task has its own execution space, consisting of a code
      segment, data segments, and a stack segment for each privilege level. Tasks can also
      have their own virtual-memory environment managed by the page-translation mechanism.
      The state information defining this execution space is stored in the task-state
      segment (TSS) maintained for each task.
      </p>

      <p>Support for hardware multitasking is provided by implementations of the x86_64
      architecture when software is running in legacy mode. Hardware multitasking provides
      automated mechanisms for switching tasks, saving the execution state of the suspended
      task, and restoring the execution state of the resumed task. When hardware multitasking
      is used to switch tasks, the processor takes the following actions:
      </p>

      <ul>
        <li>The processor automatically suspends execution of the task, allowing any executing
          instructions to complete and save their results.</li>
        <li>The execution state of a task is saved in the task TSS.</li>
        <li>The execution state of a new task is loaded into the processor from its TSS.</li>
        <li>The processor begins executing the new task at the location specified in the
          new task TSS.</li>
      </ul>

      <p>Use of hardware-multitasking features is optional in legacy mode. Generally,
      modern operating systems do not use the hardware-multitasking features, and instead
      perform task management entirely in software. Long mode does not support hardware
      multitasking at all.
      </p>

      <p>Whether hardware multitasking is used or not, system software must create and
      initialize at least one task-state segment data-structure. This requirement holds for
      both long-mode and legacy-mode software. The single task-state segment holds critical
      pieces of the task execution environment and is referenced during certain control
      transfers.
      </p>

      <h3>1.7.2 Machine Check</h3>
      <p>Implementations of the x86_64 architecture support the machine-check exception.
      This exception is useful in system applications with stringent requirements for
      reliability, availability, and serviceability. The exception allows specialized
      system-software utilities to report hardware errors that are generally severe and
      non-recoverable. Providing the capability to report such errors can allow complex system
      problems to be pinpointed rapidly.
      </p>

      <h3>1.7.3 Software Debugging</h3>
      <p>A software-debugging mechanism is provided in hardware to help software developers
      quickly isolate programming errors. This capability can be used to debug system software
      and application software alike. Only privileged software can access the debugging
      facilities. Generally, software-debug support is provided by a privileged application
      program rather than by the operating system itself.
      </p>

      <p>The facilities supported by the x86_64 architecture allow debugging software to
      perform the following:
      </p>

      <ul>
        <li>Set breakpoints on specific instructions within a program.</li>
        <li>Set breakpoints on an instruction-address match.</li>
        <li>Set breakpoints on a data-address match.</li>
        <li>Set breakpoints on specific I/O-port addresses.</li>
        <li>Set breakpoints to occur on task switches when hardware multitasking is used.</li>
        <li>Single step an application instruction-by-instruction.</li>
        <li>Single step only branches and interrupts.</li>
        <li>Record a history of branches and interrupts taken by a program.</li>
      </ul>

      <h3>1.7.4 Performance Monitoring</h3>
      <p>Implementations of the x86_64 architecture provide hardware performance-monitoring
      resources that can be used by special software applications to identify such bottlenecks.
      Non-privileged software can access the performance monitoring facilities,
      but only if privileged software grants that access.
      </p>

      <p>The performance-monitoring facilities allow the counting of events, or the duration
      of events. Performance-analysis software can use the data to calculate the frequency of
      certain events, or the time spent performing specific activities. That information can be
      used to suggest areas for improvement and the types of optimizations that are helpful.
      </p>

   </section>
    <nav>
      <p>
        [<a href="ch1.6.html">prev</a>]
        [<a href="intro.html">contents</a>]
        [<a href="../../index.html">home</a>]
        [<a href="ch2.1.html">next</a>]
      </p>
    </nav>
  </main>
</body>
</html>
